version: 2.1

orbs:
  node: circleci/node@4.7.0
  browser-tools: circleci/browser-tools@1.1.3

jobs:
  automation:
    macos:
      xcode: 11.3.0

    steps:
      - checkout
      - browser-tools/install-chrome
      - node/install:
          node-version: "15.8"
      - run:
          command: |
            google-chrome --version
            node --version
          name: Check Versions
      - run:
          command: |
            npm i
          name: Install NPM Packages
      - run:
          command: |
            node CircleCI.js $MODULES $SECRETS $PARAMETERS
          name: Run Automation

workflows:
  run_automation:
    jobs:
      - automation