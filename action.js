var t=require("child_process");p();l();function p(){try{process.stdout.write("Installing PNPM... "),(0,t.execSync)("npm i -g pnpm",{cwd:__dirname}),console.log("Done")}catch{}try{process.stdout.write("Installing Packages... "),(0,t.execSync)("pnpm i",{cwd:__dirname}),console.log("Done")}catch{}try{process.stdout.write("Installing Playwright Dependencies... "),(0,t.execSync)("pnpx -y playwright install",{cwd:__dirname}),console.log("Done")}catch{}try{process.stdout.write("Installing Browser Dependencies... "),(0,t.execSync)("pnpx -y playwright install-deps",{cwd:__dirname}),console.log("Done")}catch{}console.log(`
`)}async function l(){let e=require("@actions/core");try{let{BahamutAutomation:s}=require("./lib/core"),o=e.getInput("modules"),n={...JSON.parse(e.getInput("parameters")||"{}")},c={...JSON.parse(e.getInput("secrets")||"{}")},a={type:"webkit",...JSON.parse(e.getInput("browser")||"{}")},r=await new s({modules:o.split(",").map(i=>i.trim()),params:{...n,...c},browser:a}).run();r&&(console.log(r),process.exit(0))}catch(s){e.setFailed(s.message),process.exit(1)}}
