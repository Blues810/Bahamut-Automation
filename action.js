var t=require("child_process");l();p();function l(){try{process.stdout.write("Installing NPM Dependencies... "),(0,t.execSync)("npm install",{cwd:__dirname}),console.log("Done")}catch{}try{process.stdout.write("Installing Playwright Dependencies... "),(0,t.execSync)("npx playwright install",{cwd:__dirname}),console.log("Done")}catch{}try{process.stdout.write("Installing Browser Dependencies... "),(0,t.execSync)("npx playwright install-deps",{cwd:__dirname}),console.log("Done")}catch{}console.log(`
`)}async function p(){let e=require("@actions/core");try{let{BahamutAutomation:s}=require("./lib/core"),n=e.getInput("modules"),o={...JSON.parse(e.getInput("parameters")||"{}")},a={...JSON.parse(e.getInput("secrets")||"{}")},c={type:"webkit",...JSON.parse(e.getInput("browser")||"{}")},r=await new s({modules:n.split(",").map(i=>i.trim()),params:{...o,...a},browser:c}).run();r&&(console.log(r),process.exit(0))}catch(s){e.setFailed(s.message),process.exit(1)}}
