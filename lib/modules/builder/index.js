var l=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var b=e=>l(e,"__esModule",{value:!0});var I=(e,t)=>{for(var a in t)l(e,a,{get:t[a],enumerable:!0})},P=(e,t,a,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of f(t))!h.call(e,o)&&(a||o!=="default")&&l(e,o,{get:()=>t[o],enumerable:!(r=$(t,o))||r.enumerable});return e};var M=(e=>(t,a)=>e&&e.get(t)||(a=P(b({}),t,1),e&&e.set(t,a),a))(typeof WeakMap!="undefined"?new WeakMap:0);var F={};I(F,{default:()=>L});var d=class{parameters=[];run({page:t,outputs:a,params:r,logger:o}){throw new Error("Module not implemented.")}},w=d;var g=new w;g.parameters=[{name:"builder",required:!0,example:[{bsn:"",snA:"",content:""}]}];g.run=async({page:e,outputs:t,params:a,logger:r})=>{let o=(...i)=>r.log("\x1B[95m[\u56DE\u6587]\x1B[m",...i),u=(...i)=>r.error("\x1B[95m[\u56DE\u6587]\x1B[m",...i);if(!t.utils.logged_in())throw new Error("\u4F7F\u7528\u8005\u672A\u767B\u5165\uFF0C\u7121\u6CD5\u767C\u4F48\u52C7\u8005\u5927\u8072\u8AAA");let{builder:n}=a;if(n.length<1)return{success:!1};for(let i=0;i<n.length;i++)try{let{bsn:s,snA:m,content:p}=n[i];o(`\u6B63\u5617\u8A66\u5728 https://forum.gamer.com.tw/C.php?bsn=${s}&snA=${m} \u56DE\u6587`),await e.goto(`https://forum.gamer.com.tw/post1.php?bsn=${s}&snA=${m}&type=2`),await e.waitForTimeout(2e3),await e.$("dialog")&&await e.click("dialog button"),await e.waitForTimeout(300),await e.evaluate(()=>{onTipsClick&&onTipsClick()}),await e.waitForTimeout(300),await e.evaluate(()=>{document.querySelector("#source").style.display==="none"&&bahaRte.toolbar.alternateView(!0)}),await e.waitForTimeout(300),await e.$eval("#source",y=>{y.value=""}),await e.type("#source",T(p),{delay:11}),await e.waitForTimeout(300),await e.evaluate(()=>{Forum.Post.post()}),await e.waitForTimeout(300),await e.click("form[method=dialog] button[type=submit]"),await e.waitForTimeout(5e3),o(`\u5DF2\u5728 https://forum.gamer.com.tw/C.php?bsn=${s}&snA=${m} \u56DE\u6587`),i+1<n.length&&(o("\u7B49\u5F85\u767C\u6587\u51B7\u537B 1 \u5206\u9418"),await e.waitForTimeout(60*1e3))}catch(s){u(s)}return{success:!0}};function T(e){let t=v(),a=[[/\$time\$/g,"$year$/$month$/$day$ $hour$:$minute$:$second$"],[/\$year\$/g,t[0]],[/\$month\$/g,t[1]],[/\$day\$/g,t[2]],[/\$hour\$/g,t[3]],[/\$minute\$/g,t[4]],[/\$second\$/g,t[5]]];for(let r=0;r<a.length;r++)e=e.replace(a[r][0],a[r][1]);return e}function v(){let e=new Date().toLocaleString("en",{timeZone:"Asia/Taipei"}).split(", "),[t,a,r]=e[0].split("/"),[o,u,n]=e[1].match(/\d{1,2}/g);return+o==12&&e[1].toLowerCase().includes("am")&&(o=String(+o-12)),+o<12&&e[1].toLowerCase().includes("pm")&&(o=String(+o+12)),[r,t,a,o,u,n]}var L=g;module.exports=M(F);0&&(module.exports={});
