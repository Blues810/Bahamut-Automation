var k=Object.create;var p=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var q=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var f=e=>p(e,"__esModule",{value:!0});var A=(e,t)=>{for(var r in t)p(e,r,{get:t[r],enumerable:!0})},h=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of j(t))!L.call(e,a)&&(r||a!=="default")&&p(e,a,{get:()=>t[a],enumerable:!(s=$(t,a))||s.enumerable});return e},w=(e,t)=>h(f(p(e!=null?k(q(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),T=(e=>(t,r)=>e&&e.get(t)||(r=h(f({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var E={};A(E,{default:()=>D});var c=w(require("node-fetch")),P=w(require("countapi-js"));var y=class{parameters=[];run({page:t,outputs:r,params:s,logger:a}){throw new Error("Module not implemented.")}},I=y;var d=new I;d.parameters=[{name:"answer_max_attempts",required:!1}];d.run=async({page:e,outputs:t,params:r,logger:s})=>{let a=(...g)=>s.log("[95m[\u52D5\u756B\u760B\u7B54\u984C][m",...g);if(!t.login||!t.login.success)throw new Error("\u4F7F\u7528\u8005\u672A\u767B\u5165\uFF0C\u7121\u6CD5\u7B54\u984C");let i=0,o={};a("\u958B\u59CB\u57F7\u884C");let x=+r.answer_max_attempts||3;for(let g=0;g<x;g++)try{if(a("\u6B63\u5728\u6AA2\u6E2C\u7B54\u984C\u72C0\u614B"),await e.goto("https://ani.gamer.com.tw/"),await e.waitForTimeout(200),o=await e.evaluate(()=>fetch("/ajax/animeGetQuestion.php?t="+Date.now()).then(m=>m.json())),o.question){let m=[null,o.a1,o.a2,o.a3,o.a4];a("\u5C1A\u672A\u56DE\u7B54\u4ECA\u65E5\u984C\u76EE\uFF0C\u5617\u8A66\u7B54\u984C\u4E2D"),a(`\u4ECA\u5929\u7684\u554F\u984C\uFF1A${o.question}`),a(`\u9078\u9805\uFF1A${m.filter(Boolean).join(", ")}`),a("\u6B63\u5728\u5C0B\u627E\u7B54\u6848");let M=o.token,_=await(0,c.default)("https://api.gamer.com.tw/mobile_app/bahamut/v1/home.php?owner=blackXblue&page=1").then(n=>n.json()).then(n=>n.creation[0].sn),l=await(0,c.default)("https://api.gamer.com.tw/mobile_app/bahamut/v1/home_creation_detail.php?sn="+_).then(n=>n.json()).then(n=>n.content.match(/<body[\s\w"-=]*>([\s\S]*)<\/body>/)[0].match(/A[:ï¼š](\d)/gi)[0].match(/\d/)[0]).then(parseInt);a(`\u7B54\u6848\u662F ${l}. ${m[l]} \uFF01`),a("\u6B63\u5728\u5617\u8A66\u56DE\u7B54");let u=await e.evaluate(async({ans:n,token:v})=>(await fetch("/ajax/animeAnsQuestion.php",{headers:{accept:"*/*","content-type":"application/x-www-form-urlencoded","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"},method:"POST",body:encodeURI(`token=${v}&ans=${n}&t=${Date.now()}`)})).json(),{ans:l,token:M});u.error&&a("\u56DE\u7B54\u554F\u984C\u6642\u767C\u751F\u932F\u8AA4 "+u.msg+" [91m\u2718[m"),u.ok&&(a("\u5DF2\u56DE\u7B54\u554F\u984C "+u.gift+" [92m\u2714[m"),i=+u.gift.match(/\d{2,4}/)[0])}else o.error===1&&o.msg==="\u4ECA\u65E5\u5DF2\u7D93\u7B54\u904E\u984C\u76EE\u4E86\uFF0C\u4E00\u5929\u50C5\u9650\u4E00\u6B21\u6A5F\u6703"?a("\u4ECA\u65E5\u5DF2\u7D93\u7B54\u904E\u984C\u76EE\u4E86 [92m\u2714[m"):a("\u767C\u751F\u672A\u77E5\u932F\u8AA4\uFF1A"+o.msg+" [91m\u2718[m");await e.waitForTimeout(1e3);break}catch(m){s.error(m),a("\u767C\u751F\u932F\u8AA4\uFF0C\u91CD\u8A66\u4E2D [91m\u2718[m")}return a("\u57F7\u884C\u5B8C\u7562 \u2728"),i&&P.default.update("Bahamut-Automation","answer",i),{answered:!!(o.error===1||i),reward:i,report:B}};function B({reward:e,answered:t}){let r=`# \u52D5\u756B\u760B\u7B54\u984C

`;return e&&(r+=`\u2728\u2728\u2728 \u7372\u5F97 ${e} \u5DF4\u5E63 \u2728\u2728\u2728
`),t?r+=`\u{1F7E2} \u4ECA\u65E5\u5DF2\u7B54\u984C
`:r+=`\u274C \u4ECA\u65E5\u5C1A\u672A\u7B54\u984C
`,r+=`
`,r}var D=d;module.exports=T(E);0&&(module.exports={});
