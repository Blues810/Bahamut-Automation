/* minified */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const _module_1=require("./_module"),guild=new _module_1.Module;function report(){return"# å…¬æœƒç°½åˆ°\n\nðŸŸ¢ å·²åŸ·è¡Œ\n\n"}guild.parameters=[{name:"guild_max_attempts",required:!1}],guild.run=async({page:t,outputs:e,params:r,logger:a})=>{var o=(...e)=>a.log("[95m[å…¬æœƒç°½åˆ°][m",...e),i=(...e)=>a.error("[95m[å…¬æœƒç°½åˆ°][m",...e);if(!e.login||!e.login.success)throw new Error("ä½¿ç”¨è€…æœªç™»å…¥ï¼Œç„¡æ³•é€²è¡Œå…¬æœƒç°½åˆ°");let u=+r.guild_max_attempts||3;for(;u--;)try{await t.goto("https://home.gamer.com.tw/joinGuild.php"),await t.waitForTimeout(2e3);var n,l=await t.evaluate(()=>[...document.querySelectorAll(".acgbox .acgboximg a")].map(e=>e.href));o(`å·²åŠ å…¥ ${l.length} å€‹å…¬æœƒ`);for(n of l)try{await t.goto(n),await t.waitForTimeout(1e3);var m=await t.evaluate(()=>(guild.sign(),document.querySelector(".main-container_header_info h1").innerText));await t.waitForTimeout(2e3),o("å·²ç°½åˆ° "+m)}catch(e){i(e)}break}catch(e){i(e),await t.waitForTimeout(500)}return{report:report}},exports.default=guild;