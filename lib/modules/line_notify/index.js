var m=require("node-fetch");exports.parameters=[{name:"line_notify_token",required:!0}];exports.run=async({outputs:n,params:i,logger:t})=>{let r=(...e)=>t.log("[95m[Line Notify][m",...e),a=(...e)=>t.info("[95m[Line Notify][m",...e),o=(...e)=>t.error("[95m[Line Notify][m",...e);if(!n.report){o("\u8ACB\u8A2D\u5B9A report \u6A21\u7D44");return}if(!i.line_notify_token){o("\u8ACB\u8A2D\u5B9A Line Notify Token (line_notify_token)");return}if((await n.report.text()).length==0){r("\u6C92\u6709\u5831\u544A\u5167\u5BB9");return}let f=await n.report.markdown(),s=new URLSearchParams;s.append("message",`${n.report.title}
${f}`);let y=await m("https://notify-api.line.me/api/notify",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${i.line_notify_token}`},body:s}).then(e=>e.json());y.status===200?r("\u5DF2\u767C\u9001 Line Notify"):(a(y),a(f),o("\u767C\u9001 Line Notify \u5931\u6557\uFF01"))};
