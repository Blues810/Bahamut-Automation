/* minified */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Pool{size;tasks=[];results=[];available;resolves=[];constructor(s){this.size=s,this.available=s}push(s){this.tasks.push(async()=>s())}async go(){const s=[];for(let e=0;e<this.tasks.length;e++)await this.isAvailable(),s.push(this.tasks[e]().then(s=>{this.results[e]=s,0<this.resolves.length&&this.resolves.shift()(!1)}));return await Promise.all(s),this.results}isAvailable(){return new Promise(s=>{0<this.available?(this.available--,s(!0)):this.resolves.push(s)})}}exports.default=Pool;