var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var o=Object.prototype.hasOwnProperty;var u=a=>l(a,"__esModule",{value:!0});var v=(a,s)=>{for(var e in s)l(a,e,{get:s[e],enumerable:!0})},b=(a,s,e,i)=>{if(s&&typeof s=="object"||typeof s=="function")for(let t of n(s))!o.call(a,t)&&(e||t!=="default")&&l(a,t,{get:()=>s[t],enumerable:!(i=h(s,t))||i.enumerable});return a};var m=(a=>(s,e)=>a&&a.get(s)||(e=b(u({}),s,1),a&&a.set(s,e),e))(typeof WeakMap!="undefined"?new WeakMap:0);var y={};v(y,{default:()=>p});var r=class{size;tasks=[];results=[];available;resolves=[];constructor(s){this.size=s,this.available=s}push(s){this.tasks.push(async()=>s())}async go(){let s=[];for(let e=0;e<this.tasks.length;e++)await this.isAvailable(),s.push(this.tasks[e]().then(i=>{this.results[e]=i,this.resolves.length>0&&this.resolves.shift()(!1)}));return await Promise.all(s),this.results}isAvailable(){return new Promise(s=>{this.available>0?(this.available--,s(!0)):this.resolves.push(s)})}},p=r;module.exports=m(y);0&&(module.exports={});
