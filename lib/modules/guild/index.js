var u=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var f=e=>u(e,"__esModule",{value:!0});var I=(e,r)=>{for(var a in r)u(e,a,{get:r[a],enumerable:!0})},h=(e,r,a,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of y(r))!w.call(e,o)&&(a||o!=="default")&&u(e,o,{get:()=>r[o],enumerable:!(n=c(r,o))||n.enumerable});return e};var P=(e=>(r,a)=>e&&e.get(r)||(a=h(f({}),r,1),e&&e.set(r,a),a))(typeof WeakMap!="undefined"?new WeakMap:0);var M={};I(M,{default:()=>x});var g=class{parameters=[];run({page:r,outputs:a,params:n,logger:o}){throw new Error("Module not implemented.")}};var l=new g;l.parameters=[{name:"guild_max_attempts",required:!1}];l.run=async({page:e,outputs:r,params:a,logger:n})=>{let o=(...t)=>n.log("[95m[\u516C\u6703\u7C3D\u5230][m",...t),s=(...t)=>n.error("[95m[\u516C\u6703\u7C3D\u5230][m",...t);if(!r.login||!r.login.success)throw new Error("\u4F7F\u7528\u8005\u672A\u767B\u5165\uFF0C\u7121\u6CD5\u9032\u884C\u516C\u6703\u7C3D\u5230");let p=+a.guild_max_attempts||3;for(;p--;)try{await e.goto("https://home.gamer.com.tw/joinGuild.php"),await e.waitForTimeout(2e3);let t=await e.evaluate(()=>[...document.querySelectorAll(".acgbox .acgboximg a")].map(i=>i.href));o(`\u5DF2\u52A0\u5165 ${t.length} \u500B\u516C\u6703`);for(let i of t)try{await e.goto(i),await e.waitForTimeout(1e3);let m=await e.evaluate(()=>(guild.sign(),document.querySelector(".main-container_header_info h1").innerText));await e.waitForTimeout(2e3),o(`\u5DF2\u7C3D\u5230 ${m}`)}catch(m){s(m)}break}catch(t){s(t),await e.waitForTimeout(500)}return{report:b}};function b(){let e=`# \u516C\u6703\u7C3D\u5230

`;return e+=`\u{1F7E2} \u5DF2\u57F7\u884C

`,e}var x=l;module.exports=P(M);0&&(module.exports={});
