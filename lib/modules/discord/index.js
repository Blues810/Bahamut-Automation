var m=require("node-fetch");exports.parameters=[{name:"dc_url",required:!0}];exports.run=async({outputs:e,params:s,logger:o})=>{let i=(...r)=>o.log("\x1B[95m[Discord]\x1B[m",...r),t=(...r)=>o.error("\x1B[95m[Discord]\x1B[m",...r),a=(...r)=>o.info("\x1B[95m[Discord]\x1B[m",...r),{dc_url:n}=s;if(!e.report){t("\u8ACB\u8A2D\u5B9A report \u6A21\u7D44");return}if(!n){t("\u8ACB\u8A2D\u5B9A Discord Webhook (dc_url)");return}if((await e.report.text()).length==0){i("\u6C92\u6709\u5831\u544A\u5167\u5BB9");return}let c=(await e.report.markdown()).replace(/^#+([^#].*)/gm,r=>`**${r.replace(/^#+/,"").trim()}**`),{ok:d}=await m(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:null,embeds:[{title:e.report.title,color:1146518,description:c}]})});d?i("\u5DF2\u767C\u9001 Discord \u5831\u544A\uFF01"):(a(c),t("\u767C\u9001 Discord \u5831\u544A\u5931\u6557\uFF01"))};
