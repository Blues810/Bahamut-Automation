var g=require("node-fetch");exports.parameters=[{name:"tg_id",required:!0}];exports.run=async({outputs:r,params:i,logger:t})=>{let n=(...e)=>t.log("[95m[Telegram][m",...e),a=(...e)=>t.error("[95m[Telegram][m",...e),s=(...e)=>t.info("[95m[Telegram][m",...e),{tg_id:o}=i;if(!r.report){a("\u8ACB\u8A2D\u5B9A report \u6A21\u7D44");return}if(!o){a("\u8ACB\u8A2D\u5B9A Telegram ID (tg_id)");return}if((await r.report.text()).length==0){n("\u6C92\u6709\u5831\u544A\u5167\u5BB9");return}let m=(await r.report.markdown()).replace(/^#+([^#].*)/gm,e=>`**${e.replace(/^#+/,"").trim()}**`),{ok:c}=await g("https://automia.jacob.workers.dev/",{method:"POST",body:JSON.stringify({id:o,send:m})}).then(e=>e.json());c?n("\u5DF2\u767C\u9001 Telegram \u5831\u544A\uFF01"):(s(m),a("\u767C\u9001 Telegram \u5831\u544A\u5931\u6557\uFF01"))};
