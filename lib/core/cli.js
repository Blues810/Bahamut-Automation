/* minified */
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),_1=__importDefault(require("./")),readline=require("readline").createInterface({input:process.stdin,output:process.stdout});async function main(){var t=parsed_args();(t.help||t.h)&&(help(),process.exit(0));let e=(t.mode?+t.mode[0]:null)||(t.m?+t.m[0]:null);if(1!==e&&2!==e)for(;;)if(e=+await ask(["選擇模式: ","1. 設定檔執行","2. 直接執行",">> "].join("\n")),1===e||2===e)break;if(1===e){let e=(t.config?t.config[0]:null)||(t.c?t.c[0]:null);if(e=e&&path_1.default.resolve(process.cwd(),e),!fs_1.default.existsSync(e))for(;;){if(e=path_1.default.resolve(process.cwd(),await ask("請輸入設定檔位置: ")),fs_1.default.existsSync(e))break;console.log("設定檔不存在:",e)}t=require(e);const o=new _1.default(t);await o.run()}else 2===e&&console.log("抱歉，我還沒實作這個功能。 :(");console.log("程式執行完畢"),process.exit(0)}function ask(t=""){return new Promise(e=>readline.question(t,e))}function parsed_args(){var t=process.argv.slice(2);const o={};let s=null;for(let e=0;e<t.length;e++){const l=t[e];l.startsWith("--")?(s=l.slice(2),o[s]||(o[s]=[])):l.startsWith("-")?(s=l.slice(1),o[s]||(o[s]=[])):s&&o[s].push(l)}return o}function help(){console.log("參數: [--mode=1|2] [--config=path] [--help]"),console.log("  --mode (-m): 設定檔執行模式"),console.log("  --config (-c): 設定檔位置"),console.log("  --help (-h): 顯示此說明")}main();